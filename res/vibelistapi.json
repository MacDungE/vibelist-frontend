{
  "openapi": "3.1.0",
  "info": {
    "title": "VibeList API",
    "description": "VibeList 백엔드 API 문서",
    "contact": {
      "name": "VibeList Team",
      "email": "contact@vibelist.com"
    },
    "license": {
      "name": "MIT License",
      "url": "https://opensource.org/licenses/MIT"
    },
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "http://localhost:8080",
      "description": "개발 서버"
    },
    {
      "url": "https://api.vibelist.com",
      "description": "운영 서버"
    }
  ],
  "security": [
    {
      "bearer-key": [],
      "access-cookie": [],
      "cookie-auth": []
    }
  ],
  "tags": [
    {
      "name": "Explore",
      "description": "검색 및 트렌드 피드 API"
    },
    {
      "name": "인증 관리",
      "description": "사용자 인증 및 권한 관리 API"
    },
    {
      "name": "시스템 상태",
      "description": "애플리케이션 상태 확인 API"
    },
    {
      "name": "Tag",
      "description": "태그 검색·자동완성 API"
    },
    {
      "name": "댓글 관리",
      "description": "댓글 API"
    },
    {
      "name": "사용자 관리",
      "description": "사용자 정보 및 프로필 관리 API"
    },
    {
      "name": "외부 서비스 연동",
      "description": "Spotify, Google Music 등 외부 서비스 연동 관리 API"
    }
  ],
  "paths": {
    "/v1/users/{userId}/profile": {
      "put": {
        "tags": ["사용자 관리"],
        "summary": "사용자 프로필 업데이트",
        "description": "특정 사용자의 프로필을 업데이트합니다. (관리자용)",
        "operationId": "updateUserProfile",
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "description": "업데이트할 사용자 ID",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUserProfileRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer-key": []
          }
        ]
      }
    },
    "/v1/users/me/profile": {
      "put": {
        "tags": ["사용자 관리"],
        "summary": "현재 사용자 프로필 업데이트",
        "description": "현재 인증된 사용자의 프로필을 업데이트합니다.",
        "operationId": "updateCurrentUserProfile",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUserProfileRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer-key": []
          }
        ]
      }
    },
    "/v1/comments/{id}": {
      "put": {
        "tags": ["댓글 관리"],
        "summary": "댓글 수정",
        "description": "댓글 내용을 수정합니다.",
        "operationId": "update",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "details",
            "in": "query",
            "required": true,
            "schema": {
              "$ref": "#/components/schemas/CustomUserDetails"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CommentUpdateDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/RsDataObject"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["댓글 관리"],
        "summary": "댓글 삭제",
        "description": "댓글을 삭제합니다.",
        "operationId": "delete",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "details",
            "in": "query",
            "required": true,
            "schema": {
              "$ref": "#/components/schemas/CustomUserDetails"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/RsDataObject"
                }
              }
            }
          }
        }
      }
    },
    "/v1/users": {
      "get": {
        "tags": ["사용자 관리"],
        "summary": "사용자 목록 조회",
        "description": "모든 사용자의 목록을 조회합니다. (관리자용)",
        "operationId": "getAllUsers",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer-key": []
          }
        ]
      },
      "post": {
        "tags": ["사용자 관리"],
        "summary": "사용자 생성",
        "description": "새로운 사용자와 프로필을 생성합니다.",
        "operationId": "createUser",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateUserRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/RsDataObject"
                }
              }
            }
          }
        }
      }
    },
    "/v1/recommend": {
      "post": {
        "tags": ["recommend-controller"],
        "summary": "감정 기반 트랙 추천",
        "description": "사용자의 감정 정보를 바탕으로 트랙을 추천합니다. valence/energy 직접 입력하거나 자연어 감정 설명을 입력할 수 있습니다. (둘 중 하나만 입력해도 추천이 동작합니다.)",
        "operationId": "recommend",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RecommendRqDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RsDataObject"
                }
              }
            }
          }
        }
      }
    },
    "/v1/post": {
      "post": {
        "tags": ["post-controller"],
        "summary": "게시글 + 플레이리스트 생성",
        "description": "트랙 리스트를 포함한 게시글을 작성합니다.",
        "operationId": "createPost",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PostCreateRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RsDataLong"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer-key": []
          },
          {
            "access-cookie": []
          },
          {
            "cookie-auth": []
          }
        ]
      }
    },
    "/v1/post/{postId}/likes": {
      "post": {
        "tags": ["like-controller"],
        "summary": "포스트 좋아요 토글",
        "operationId": "togglePost",
        "parameters": [
          {
            "name": "postId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/RsDataObject"
                }
              }
            }
          }
        }
      }
    },
    "/v1/playlist/add": {
      "post": {
        "tags": ["Spotify Playlist 삽입"],
        "summary": "Spotify에 Playlist 삽입",
        "description": "유저가 선택한 Playlist를 Spotify에 삽입합니다. 개발자가 최초에 로그인을 하지 않았다면, login-dev 호출이 필요합니다.",
        "operationId": "addPlaylist",
        "parameters": [
          {
            "name": "userId",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/TrackRsDto"
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/RsDataObject"
                }
              }
            }
          }
        }
      }
    },
    "/v1/elasticsearch/insert": {
      "get": {
        "tags": ["es-controller"],
        "summary": "RDS to ES 데이터 이관",
        "description": "Rds에 저장되어 있는 Audio-feature 데이터들을 ElasticSearch로 옮기는 메소드.",
        "operationId": "rdsToEs",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/RsDataObject"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["test-es-controller"],
        "summary": "테스트 ES 도큐먼트 삽입",
        "description": "테스트용 ES 도큐먼트 삽입 API",
        "operationId": "insert",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/TestEsDoc"
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/RsDataObject"
                }
              }
            }
          }
        }
      }
    },
    "/v1/comments": {
      "get": {
        "tags": ["댓글 관리"],
        "summary": "댓글 조회",
        "description": "현재 게시글의 댓글을 정렬 기준에 따라 조회합니다.",
        "operationId": "getAll",
        "parameters": [
          {
            "name": "postId",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "sort",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "default": "latest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/RsDataObject"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["댓글 관리"],
        "summary": "댓글 생성",
        "description": "새로운 댓글을 등록합니다.",
        "operationId": "create",
        "parameters": [
          {
            "name": "details",
            "in": "query",
            "required": true,
            "schema": {
              "$ref": "#/components/schemas/CustomUserDetails"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CommentCreateDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/RsDataObject"
                }
              }
            }
          }
        }
      }
    },
    "/v1/comment/{commentId}/likes": {
      "post": {
        "tags": ["like-controller"],
        "summary": "댓글 좋아요 토글",
        "operationId": "toggleComment",
        "parameters": [
          {
            "name": "commentId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/LikeStatusRes"
                }
              }
            }
          }
        },
        "security": [
          {
            "access-cookie": []
          }
        ]
      }
    },
    "/v1/auth/social/complete-signup": {
      "post": {
        "tags": ["인증 관리"],
        "summary": "소셜 회원가입 완료",
        "description": "소셜 로그인 후 사용자명을 설정하여 회원가입을 완료합니다.",
        "operationId": "completeSocialSignup",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CompleteSocialSignupRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/v1/auth/refresh": {
      "post": {
        "tags": ["인증 관리"],
        "summary": "토큰 갱신",
        "description": "리프레시 토큰을 사용해 새로운 액세스 토큰을 발급받습니다.",
        "operationId": "refreshToken",
        "parameters": [
          {
            "name": "refreshToken",
            "in": "cookie",
            "description": "리프레시 토큰 (쿠키)",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/v1/auth/oauth2/token": {
      "post": {
        "tags": ["인증 관리"],
        "summary": "OAuth2 로그인 후 액세스 토큰 획득",
        "description": "OAuth2 로그인 완료 후 리프레시 토큰을 사용해 액세스 토큰을 획득합니다.",
        "operationId": "getOAuth2AccessToken",
        "parameters": [
          {
            "name": "refreshToken",
            "in": "cookie",
            "description": "리프레시 토큰 (쿠키)",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/v1/auth/logout": {
      "post": {
        "tags": ["인증 관리"],
        "summary": "로그아웃",
        "description": "사용자를 로그아웃하고 토큰을 무효화합니다.",
        "operationId": "logout",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer-key": []
          }
        ]
      }
    },
    "/v1/auth/login": {
      "post": {
        "tags": ["인증 관리"],
        "summary": "로그인",
        "description": "사용자명과 비밀번호로 로그인하여 액세스 토큰을 발급받습니다.",
        "operationId": "login",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/v1/post/{id}": {
      "get": {
        "tags": ["post-controller"],
        "summary": "게시글 상세 조회",
        "description": "게시글과 연결된 플레이리스트 및 트랙 정보를 반환합니다.",
        "operationId": "getPostDetail",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/RsDataObject"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer-key": []
          },
          {
            "access-cookie": []
          },
          {
            "cookie-auth": []
          }
        ]
      },
      "delete": {
        "tags": ["post-controller"],
        "summary": "게시글 삭제",
        "description": "게시글을 소프트 삭제합니다.",
        "operationId": "deletePost",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/RsDataObject"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer-key": []
          },
          {
            "access-cookie": []
          },
          {
            "cookie-auth": []
          }
        ]
      },
      "patch": {
        "tags": ["post-controller"],
        "summary": "게시글 수정",
        "description": "게시글 내용과 공개 여부를 수정합니다.",
        "operationId": "updatePost",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PostUpdateRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/RsDataObject"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer-key": []
          },
          {
            "access-cookie": []
          },
          {
            "cookie-auth": []
          }
        ]
      }
    },
    "/v1/users/{userId}": {
      "get": {
        "tags": ["사용자 관리"],
        "summary": "사용자 정보 조회",
        "description": "특정 사용자의 정보를 조회합니다.",
        "operationId": "getUser",
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/RsDataObject"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["사용자 관리"],
        "summary": "사용자 삭제",
        "description": "특정 사용자를 삭제합니다. (관리자용)",
        "operationId": "deleteUser",
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "description": "삭제할 사용자 ID",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer-key": []
          }
        ]
      }
    },
    "/v1/users/search": {
      "get": {
        "tags": ["사용자 관리"],
        "summary": "사용자 검색",
        "description": "이름으로 사용자를 검색합니다.",
        "operationId": "searchUsers",
        "parameters": [
          {
            "name": "name",
            "in": "query",
            "description": "검색할 사용자 이름",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/v1/users/me": {
      "get": {
        "tags": ["사용자 관리"],
        "summary": "현재 사용자 정보 조회",
        "description": "현재 인증된 사용자의 정보를 조회합니다.",
        "operationId": "getCurrentUserInfo",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["사용자 관리"],
        "summary": "현재 사용자 삭제",
        "description": "현재 인증된 사용자를 삭제합니다.",
        "operationId": "deleteCurrentUser",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer-key": []
          }
        ]
      }
    },
    "/v1/tag/suggest": {
      "get": {
        "tags": ["Tag"],
        "summary": "태그 자동완성",
        "description": "입력한 문자열(초성·키워드)을 기반으로 태그를 추천합니다.",
        "operationId": "suggest",
        "parameters": [
          {
            "name": "q",
            "in": "query",
            "description": "검색어(초성 또는 키워드)",
            "required": true,
            "schema": {
              "type": "string"
            },
            "example": "아"
          },
          {
            "name": "limit",
            "in": "query",
            "description": "반환 개수 (default = 10)",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 10
            },
            "example": 10
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/RsDataObject"
                }
              }
            }
          }
        }
      }
    },
    "/v1/post/{postId}/likes/me": {
      "get": {
        "tags": ["like-controller"],
        "summary": "내가 눌렀는지 (포스트)",
        "operationId": "postMe",
        "parameters": [
          {
            "name": "postId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/LikeStatusRes"
                }
              }
            }
          }
        },
        "security": [
          {
            "access-cookie": []
          }
        ]
      }
    },
    "/v1/post/{postId}/likes/count": {
      "get": {
        "tags": ["like-controller"],
        "summary": "포스트 좋아요 개수",
        "operationId": "postCount",
        "parameters": [
          {
            "name": "postId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/LikeCountRes"
                }
              }
            }
          }
        }
      }
    },
    "/v1/post/likes": {
      "get": {
        "tags": ["post-controller"],
        "summary": "사용자가 좋아요한 게시글 목록 조회",
        "description": "현재 인증된 사용자가 좋아요한 게시글 목록을 조회합니다.",
        "operationId": "getLikedPostsByUser",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RsDataObject"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer-key": []
          },
          {
            "access-cookie": []
          },
          {
            "cookie-auth": []
          }
        ]
      }
    },
    "/v1/integrations/{provider}": {
      "get": {
        "tags": ["외부 서비스 연동"],
        "summary": "제공자별 토큰 정보 조회",
        "description": "특정 제공자의 토큰 정보를 조회합니다.",
        "operationId": "getProviderIntegration",
        "parameters": [
          {
            "name": "provider",
            "in": "path",
            "description": "서비스 제공자 (spotify, google 등)",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer-key": []
          }
        ]
      },
      "delete": {
        "tags": ["외부 서비스 연동"],
        "summary": "연동 해제",
        "description": "특정 제공자의 연동을 해제하고 토큰을 비활성화합니다.",
        "operationId": "disconnectProvider",
        "parameters": [
          {
            "name": "provider",
            "in": "path",
            "description": "연동 해제할 서비스 제공자",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer-key": []
          }
        ]
      }
    },
    "/v1/integrations/{provider}/valid": {
      "get": {
        "tags": ["외부 서비스 연동"],
        "summary": "유효한 토큰 정보 조회",
        "description": "특정 제공자의 유효한 토큰 정보를 조회합니다. (만료되지 않은 토큰만)",
        "operationId": "getValidProviderIntegration",
        "parameters": [
          {
            "name": "provider",
            "in": "path",
            "description": "서비스 제공자 (spotify, google 등)",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer-key": []
          }
        ]
      }
    },
    "/v1/integrations/{provider}/exists": {
      "get": {
        "tags": ["외부 서비스 연동"],
        "summary": "토큰 존재 여부 확인",
        "description": "특정 제공자의 토큰 존재 여부를 확인합니다.",
        "operationId": "checkProviderIntegrationExists",
        "parameters": [
          {
            "name": "provider",
            "in": "path",
            "description": "확인할 서비스 제공자",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer-key": []
          }
        ]
      }
    },
    "/v1/integrations/status": {
      "get": {
        "tags": ["외부 서비스 연동"],
        "summary": "연동 상태 조회",
        "description": "현재 사용자의 모든 외부 서비스 연동 상태를 조회합니다.",
        "operationId": "getCurrentUserIntegrationStatus",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/RsDataObject"
                }
              }
            }
          }
        }
      }
    },
    "/v1/integrations/spotify/token-debug": {
      "get": {
        "tags": ["외부 서비스 연동"],
        "summary": "스포티파이 토큰 디버그 정보",
        "description": "스포티파이 토큰이 정상적으로 저장되었는지 확인합니다. (개발용)",
        "operationId": "getSpotifyTokenDebugInfo",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer-key": []
          }
        ]
      }
    },
    "/v1/integrations/spotify/connect": {
      "get": {
        "tags": ["외부 서비스 연동"],
        "summary": "스포티파이 연동 시작",
        "description": "인증된 사용자가 스포티파이 연동을 시작합니다. 스포티파이 OAuth2 인증 URL을 반환합니다.",
        "operationId": "connectSpotify",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer-key": []
          }
        ]
      }
    },
    "/v1/integrations/providers": {
      "get": {
        "tags": ["외부 서비스 연동"],
        "summary": "연동된 제공자 목록",
        "description": "연동된 제공자 목록을 간단한 형태로 조회합니다.",
        "operationId": "getConnectedProviders",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer-key": []
          }
        ]
      }
    },
    "/v1/integrations/by-scope": {
      "get": {
        "tags": ["외부 서비스 연동"],
        "summary": "권한별 연동 조회",
        "description": "특정 권한(scope)을 가진 연동을 조회합니다.",
        "operationId": "getIntegrationsByScope",
        "parameters": [
          {
            "name": "scope",
            "in": "query",
            "description": "조회할 권한 스코프",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer-key": []
          }
        ]
      }
    },
    "/v1/explore/trend": {
      "get": {
        "tags": ["Explore"],
        "summary": "트렌드 조회",
        "description": "현재 인기 있는 트렌드를 조회합니다.",
        "operationId": "getTrends",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "description": "최대 조회 개수",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 10
            },
            "example": 10
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/TrendResponse"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/v1/explore/search": {
      "get": {
        "tags": ["Explore"],
        "summary": "게시글 검색",
        "description": "키워드를 기반으로 게시글을 검색합니다.",
        "operationId": "search",
        "parameters": [
          {
            "name": "q",
            "in": "query",
            "description": "검색 키워드",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/RsDataObject"
                }
              }
            }
          }
        }
      }
    },
    "/v1/explore/feed": {
      "get": {
        "tags": ["Explore"],
        "summary": "피드 조회",
        "description": "추천 게시글 피드를 조회합니다.",
        "operationId": "feed",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/RsDataObject"
                }
              }
            }
          }
        }
      }
    },
    "/v1/comment/{commentId}/likes/me": {
      "get": {
        "tags": ["like-controller"],
        "summary": "내가 눌렀는지 (댓글)",
        "operationId": "commentMe",
        "parameters": [
          {
            "name": "commentId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/LikeStatusRes"
                }
              }
            }
          }
        },
        "security": [
          {
            "access-cookie": []
          }
        ]
      }
    },
    "/v1/comment/{commentId}/likes/count": {
      "get": {
        "tags": ["like-controller"],
        "summary": "댓글 좋아요 개수",
        "operationId": "commentCount",
        "parameters": [
          {
            "name": "commentId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/LikeCountRes"
                }
              }
            }
          }
        }
      }
    },
    "/v1/auth/{userId}/social": {
      "get": {
        "tags": ["인증 관리"],
        "summary": "사용자 소셜 계정 조회",
        "description": "특정 사용자의 소셜 로그인 연동 정보를 조회합니다. (관리자용)",
        "operationId": "getUserSocialAccounts",
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "description": "조회할 사용자 ID",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer-key": []
          }
        ]
      }
    },
    "/v1/auth/status": {
      "get": {
        "tags": ["인증 관리"],
        "summary": "인증 상태 확인",
        "description": "현재 사용자의 인증 상태와 정보를 확인합니다.",
        "operationId": "getAuthStatus",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/StatusResponse"
                }
              }
            }
          }
        }
      }
    },
    "/v1/auth/social-login-urls": {
      "get": {
        "tags": ["인증 관리"],
        "summary": "소셜 로그인 URL 조회",
        "description": "Google, Kakao, Spotify 등 소셜 로그인 URL을 제공합니다.",
        "operationId": "getLoginUrls",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/v1/auth/me/social": {
      "get": {
        "tags": ["인증 관리"],
        "summary": "현재 사용자 소셜 계정 조회",
        "description": "현재 인증된 사용자의 소셜 로그인 연동 정보를 조회합니다.",
        "operationId": "getCurrentUserSocialAccounts",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer-key": []
          }
        ]
      }
    },
    "/health": {
      "get": {
        "tags": ["시스템 상태"],
        "summary": "헬스 체크",
        "description": "서버 상태 확인용 API",
        "operationId": "healthCheck",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/RsDataObject"
                }
              }
            }
          }
        }
      }
    },
    "/v1/integrations/all": {
      "delete": {
        "tags": ["외부 서비스 연동"],
        "summary": "모든 연동 해제",
        "description": "모든 외부 서비스 연동을 해제하고 토큰을 비활성화합니다.",
        "operationId": "disconnectAllProviders",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer-key": []
          }
        ]
      }
    }
  },
  "components": {
    "schemas": {
      "UpdateUserProfileRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "phone": {
            "type": "string"
          },
          "avatarUrl": {
            "type": "string"
          },
          "bio": {
            "type": "string"
          }
        }
      },
      "CommentUpdateDto": {
        "type": "object",
        "description": "댓글 수정 요청 DTO",
        "properties": {
          "content": {
            "type": "string",
            "description": "댓글 내용",
            "example": "수정된 댓글 내용입니다."
          }
        },
        "required": ["content"]
      },
      "CustomUserDetails": {
        "type": "object",
        "properties": {
          "password": {
            "type": "string"
          },
          "enabled": {
            "type": "boolean"
          },
          "id": {
            "type": "integer",
            "format": "int64"
          },
          "accountNonExpired": {
            "type": "boolean"
          },
          "accountNonLocked": {
            "type": "boolean"
          },
          "username": {
            "type": "string"
          },
          "authorities": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/GrantedAuthority"
            }
          },
          "credentialsNonExpired": {
            "type": "boolean"
          }
        }
      },
      "GrantedAuthority": {
        "type": "object",
        "properties": {
          "authority": {
            "type": "string"
          }
        }
      },
      "RsDataObject": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "code": {
            "type": "string"
          },
          "message": {
            "type": "string"
          },
          "data": {},
          "timestamp": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "CreateUserRequest": {
        "type": "object",
        "properties": {
          "username": {
            "type": "string"
          },
          "password": {
            "type": "string"
          },
          "email": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "phone": {
            "type": "string"
          },
          "role": {
            "type": "string",
            "enum": ["USER", "ADMIN"]
          }
        }
      },
      "RecommendRqDto": {
        "type": "object",
        "description": "추천 요청 DTO (텍스트 또는 좌표 기반)",
        "properties": {
          "text": {
            "type": "string",
            "description": "추천 텍스트(자연어)",
            "example": "기분 좋은 여름 노래 추천해줘"
          },
          "userValence": {
            "type": "number",
            "format": "double",
            "description": "사용자 valence(감정 좌표)",
            "example": 0.7
          },
          "userEnergy": {
            "type": "number",
            "format": "double",
            "description": "사용자 energy(감정 좌표)",
            "example": 0.5
          },
          "mode": {
            "type": "string",
            "description": "추천 모드",
            "enum": ["MAINTAIN", "ELEVATE", "CALM_DOWN", "REVERSE"],
            "example": "DEFAULT"
          }
        }
      },
      "PostCreateRequest": {
        "type": "object",
        "properties": {
          "content": {
            "type": "string",
            "description": "게시글 내용",
            "example": "오늘 만든 집중용 재즈 플레이리스트!"
          },
          "tags": {
            "type": "array",
            "description": "태그 목록",
            "example": ["study", "jazz"],
            "items": {
              "type": "string"
            }
          },
          "isPublic": {
            "type": "boolean",
            "default": true,
            "description": "공개 여부"
          },
          "tracks": {
            "type": "array",
            "description": "트랙 목록",
            "items": {
              "$ref": "#/components/schemas/TrackRsDto"
            }
          }
        }
      },
      "TrackRsDto": {
        "type": "object",
        "description": "트랙 응답 DTO",
        "properties": {
          "spotifyId": {
            "type": "string",
            "description": "Spotify 트랙 ID",
            "example": "6rqhFgbbKwnb9MLmUQDhG6"
          },
          "durationMs": {
            "type": "integer",
            "format": "int32",
            "description": "트랙 재생 시간(ms)",
            "example": 210000
          },
          "trackId": {
            "type": "string"
          },
          "title": {
            "type": "string"
          },
          "artist": {
            "type": "string"
          },
          "album": {
            "type": "string"
          },
          "popularity": {
            "type": "integer",
            "format": "int32"
          },
          "explicit": {
            "type": "boolean"
          },
          "imageUrl": {
            "type": "string"
          }
        },
        "required": ["durationMs", "spotifyId"]
      },
      "RsDataLong": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "code": {
            "type": "string"
          },
          "message": {
            "type": "string"
          },
          "data": {
            "type": "integer",
            "format": "int64"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "TestEsDoc": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "title": {
            "type": "string"
          },
          "content": {
            "type": "string"
          },
          "username": {
            "type": "string"
          }
        }
      },
      "CommentCreateDto": {
        "type": "object",
        "description": "댓글 생성 요청 DTO",
        "properties": {
          "content": {
            "type": "string",
            "description": "댓글 내용",
            "example": "좋은 글 감사합니다!"
          },
          "postId": {
            "type": "integer",
            "format": "int64",
            "description": "게시글 ID",
            "example": 123
          },
          "parentId": {
            "type": "integer",
            "format": "int64",
            "description": "부모 댓글 ID(대댓글일 때만)",
            "example": 456
          }
        },
        "required": ["content", "postId"]
      },
      "LikeStatusRes": {
        "type": "object",
        "properties": {
          "liked": {
            "type": "boolean"
          }
        }
      },
      "CompleteSocialSignupRequest": {
        "type": "object",
        "properties": {
          "username": {
            "type": "string"
          },
          "provider": {
            "type": "string"
          },
          "userId": {
            "type": "string"
          }
        }
      },
      "LoginRequest": {
        "type": "object",
        "properties": {
          "username": {
            "type": "string"
          },
          "password": {
            "type": "string"
          }
        }
      },
      "PostUpdateRequest": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int64"
          },
          "content": {
            "type": "string"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "isPublic": {
            "type": "boolean"
          }
        }
      },
      "LikeCountRes": {
        "type": "object",
        "properties": {
          "likeCount": {
            "type": "integer",
            "format": "int64"
          }
        }
      },
      "TrendResponse": {
        "type": "object",
        "properties": {
          "postId": {
            "type": "integer",
            "format": "int64"
          },
          "score": {
            "type": "number",
            "format": "double"
          },
          "rank": {
            "type": "integer",
            "format": "int32"
          },
          "previousRank": {
            "type": "integer",
            "format": "int32"
          },
          "trendStatus": {
            "type": "string",
            "enum": ["UP", "DOWN", "NEW", "SAME", "OUT"]
          },
          "rankChange": {
            "type": "integer",
            "format": "int32"
          },
          "postContent": {
            "type": "string"
          },
          "userName": {
            "type": "string"
          },
          "userProfileName": {
            "type": "string"
          },
          "snapshotTime": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "StatusResponse": {
        "type": "object",
        "properties": {
          "authenticated": {
            "type": "boolean"
          },
          "provider": {
            "type": "string"
          },
          "email": {
            "type": "string"
          },
          "name": {
            "type": "string"
          }
        }
      }
    },
    "securitySchemes": {
      "bearer-key": {
        "type": "http",
        "name": "Authorization",
        "in": "header",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      },
      "access-cookie": {
        "type": "apiKey",
        "name": "accessToken",
        "in": "cookie"
      },
      "cookie-auth": {
        "type": "apiKey",
        "name": "refreshToken",
        "in": "cookie"
      }
    }
  }
}
